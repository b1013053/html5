(function e(t,n,i){function a(o,s){if(!n[o]){if(!t[o]){var l=typeof require=="function"&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return a(n?n:e)},d,d.exports,e,t,n,i)}return n[o].exports}var r=typeof require=="function"&&require;for(var o=0;o<i.length;o++)a(i[o]);return a})({"./src/Intermediate_AWDViewer.ts":[function(e,t,n){var i=e("awayjs-core/lib/events/AssetEvent");var a=e("awayjs-core/lib/geom/Vector3D");var r=e("awayjs-core/lib/library/AssetLibrary");var o=e("awayjs-core/lib/net/URLRequest");var s=e("awayjs-core/lib/ui/Keyboard");var l=e("awayjs-core/lib/projections/PerspectiveProjection");var c=e("awayjs-core/lib/utils/RequestAnimationFrame");var d=e("awayjs-display/lib/animators/nodes/AnimationNodeBase");var u=e("awayjs-display/lib/containers/Loader");var h=e("awayjs-display/lib/containers/View");var w=e("awayjs-display/lib/controllers/HoverController");var y=e("awayjs-renderergl/lib/animators/AnimatorBase");var m=e("awayjs-renderergl/lib/animators/transitions/CrossfadeTransition");var p=e("awayjs-renderergl/lib/events/AnimationStateEvent");var f=e("awayjs-renderergl/lib/DefaultRenderer");var _=e("awayjs-methodmaterials/lib/pool/MethodRendererPool");var v=e("awayjs-parsers/lib/AWDParser");var b=function(){function e(){this._time=0;this._stateTransition=new m(.5);this.init()}e.prototype.init=function(){this.initEngine();this.initObjects();this.initListeners()};e.prototype.initEngine=function(){this._view=new h(new f(_));this._view.backgroundColor=3355448;this._view.camera.projection=new l(70);this._view.camera.projection.far=5e3;this._view.camera.projection.near=1;this._cameraController=new w(this._view.camera,null,0,0,150,10,90);this._cameraController.lookAtPosition=new a(0,60,0);this._cameraController.tiltAngle=0;this._cameraController.panAngle=0;this._cameraController.minTiltAngle=5;this._cameraController.maxTiltAngle=60;this._cameraController.autoUpdate=false};e.prototype.initObjects=function(){var e=this;r.enableParser(v);var t=new u;t.addEventListener(i.ASSET_COMPLETE,function(t){return e.onAssetComplete(t)});t.load(new o("assets/shambler.awd"));this._view.scene.addChild(t)};e.prototype.initListeners=function(){var e=this;window.onresize=function(t){return e.onResize(t)};document.onmousedown=function(t){return e.onMouseDown(t)};document.onmouseup=function(t){return e.onMouseUp(t)};document.onmousemove=function(t){return e.onMouseMove(t)};document.onmousewheel=function(t){return e.onMouseWheel(t)};document.onkeydown=function(t){return e.onKeyDown(t)};this.onResize();this._timer=new c(this.onEnterFrame,this);this._timer.start()};e.prototype.onAssetComplete=function(t){var n=this;console.log("...........",t.asset.assetType);if(t.asset.isAsset(y)){this._animator=t.asset;this._animator.play(e.IDLE_NAME)}else if(t.asset.isAsset(d)){console.log(t.asset.name);var i=t.asset;if(i.name==e.IDLE_NAME){i.looping=true}else{i.looping=false;i.addEventListener(p.PLAYBACK_COMPLETE,function(e){return n.onPlaybackComplete(e)})}}};e.prototype.onKeyDown=function(e){switch(e.keyCode){case s.NUMBER_1:this.playAction("attack01");break;case s.NUMBER_2:this.playAction("attack02");break;case s.NUMBER_3:this.playAction("attack03");break;case s.NUMBER_4:this.playAction("attack04");break;case s.NUMBER_5:this.playAction("attack05")}};e.prototype.playAction=function(e){this._animator.play(e,this._stateTransition,0)};e.prototype.onPlaybackComplete=function(t){if(this._animator.activeState!=t.animationState)return;this._animator.play(e.IDLE_NAME,this._stateTransition)};e.prototype.onEnterFrame=function(e){this._time+=e;this._cameraController.update();this._view.render()};e.prototype.onMouseDown=function(e){this._lastPanAngle=this._cameraController.panAngle;this._lastTiltAngle=this._cameraController.tiltAngle;this._lastMouseX=e.clientX;this._lastMouseY=e.clientY;this._move=true};e.prototype.onMouseUp=function(e){this._move=false};e.prototype.onMouseMove=function(e){if(this._move){this._cameraController.panAngle=.3*(e.clientX-this._lastMouseX)+this._lastPanAngle;this._cameraController.tiltAngle=.3*(e.clientY-this._lastMouseY)+this._lastTiltAngle}};e.prototype.onMouseWheel=function(e){this._cameraController.distance-=e.wheelDelta*5;if(this._cameraController.distance<100)this._cameraController.distance=100;else if(this._cameraController.distance>2e3)this._cameraController.distance=2e3};e.prototype.onResize=function(e){if(e===void 0){e=null}this._view.y=0;this._view.x=0;this._view.width=window.innerWidth;this._view.height=window.innerHeight};e.IDLE_NAME="idle";return e}();window.onload=function(){new b}},{"awayjs-core/lib/events/AssetEvent":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-core/lib/library/AssetLibrary":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/projections/PerspectiveProjection":undefined,"awayjs-core/lib/ui/Keyboard":undefined,"awayjs-core/lib/utils/RequestAnimationFrame":undefined,"awayjs-display/lib/animators/nodes/AnimationNodeBase":undefined,"awayjs-display/lib/containers/Loader":undefined,"awayjs-display/lib/containers/View":undefined,"awayjs-display/lib/controllers/HoverController":undefined,"awayjs-methodmaterials/lib/pool/MethodRendererPool":undefined,"awayjs-parsers/lib/AWDParser":undefined,"awayjs-renderergl/lib/DefaultRenderer":undefined,"awayjs-renderergl/lib/animators/AnimatorBase":undefined,"awayjs-renderergl/lib/animators/transitions/CrossfadeTransition":undefined,"awayjs-renderergl/lib/events/AnimationStateEvent":undefined}]},{},["./src/Intermediate_AWDViewer.ts"]);

//# sourceMappingURL=Intermediate_AWDViewer.js.map