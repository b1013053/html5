(function i(e,t,a){function r(n,o){if(!t[n]){if(!e[n]){var l=typeof require=="function"&&require;if(!o&&l)return l(n,!0);if(s)return s(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var c=t[n]={exports:{}};e[n][0].call(c.exports,function(i){var t=e[n][1][i];return r(t?t:i)},c,c.exports,i,e,t,a)}return t[n].exports}var s=typeof require=="function"&&require;for(var n=0;n<a.length;n++)r(a[n]);return r})({"./src/Intermediate_ParticleExplosions.ts":[function(i,e,t){var a=i("awayjs-core/lib/events/LoaderEvent");var r=i("awayjs-core/lib/geom/ColorTransform");var s=i("awayjs-core/lib/geom/Vector3D");var n=i("awayjs-core/lib/library/AssetLibrary");var o=i("awayjs-core/lib/net/URLRequest");var l=i("awayjs-core/lib/utils/RequestAnimationFrame");var h=i("awayjs-display/lib/containers/Scene");var c=i("awayjs-display/lib/containers/View");var d=i("awayjs-display/lib/controllers/HoverController");var m=i("awayjs-display/lib/entities/Camera");var u=i("awayjs-display/lib/entities/Mesh");var f=i("awayjs-display/lib/entities/PointLight");var p=i("awayjs-display/lib/materials/lightpickers/StaticLightPicker");var w=i("awayjs-display/lib/prefabs/PrimitivePlanePrefab");var g=i("awayjs-display/lib/utils/Cast");var y=i("awayjs-renderergl/lib/animators/ParticleAnimationSet");var P=i("awayjs-renderergl/lib/animators/ParticleAnimator");var b=i("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode");var v=i("awayjs-renderergl/lib/animators/nodes/ParticleBillboardNode");var A=i("awayjs-renderergl/lib/animators/nodes/ParticleBezierCurveNode");var E=i("awayjs-renderergl/lib/animators/nodes/ParticleInitialColorNode");var C=i("awayjs-renderergl/lib/animators/nodes/ParticlePositionNode");var L=i("awayjs-renderergl/lib/DefaultRenderer");var M=i("awayjs-renderergl/lib/utils/ParticleGeometryHelper");var I=i("awayjs-methodmaterials/lib/MethodMaterial");var j=i("awayjs-methodmaterials/lib/pool/MethodRendererPool");var R=function(){function i(){this.colorValues=new Array;this.colorPoints=new Array;this.time=0;this.angle=0;this.move=false;this.init()}i.prototype.init=function(){this.initEngine();this.initLights();this.initMaterials();this.initListeners()};i.prototype.initEngine=function(){this.scene=new h;this.camera=new m;this.view=new c(new L(j),this.scene,this.camera);this.cameraController=new d(this.camera,null,225,10,1e3)};i.prototype.initLights=function(){this.greenLight=new f;this.greenLight.color=65280;this.greenLight.ambient=1;this.greenLight.fallOff=600;this.greenLight.radius=100;this.greenLight.specular=2;this.scene.addChild(this.greenLight);this.blueLight=new f;this.blueLight.color=255;this.blueLight.fallOff=600;this.blueLight.radius=100;this.blueLight.specular=2;this.scene.addChild(this.blueLight);this.lightPicker=new p([this.greenLight,this.blueLight])};i.prototype.initMaterials=function(){this.colorMaterial=new I(16777215);this.colorMaterial.bothSides=true;this.colorMaterial.lightPicker=this.lightPicker};i.prototype.initParticles=function(){var e;var t;var a;var n;var o;for(e=0;e<this.chromeBitmapData.width;e++){for(t=0;t<this.chromeBitmapData.height;t++){a=new s(i.PARTICLE_SIZE*(e-this.chromeBitmapData.width/2-100),i.PARTICLE_SIZE*(-t+this.chromeBitmapData.height/2));o=this.chromeBitmapData.getPixel32(e,t);if((o>>24&255)>176){this.colorValues.push(new s(((o&16711680)>>16)/255,((o&65280)>>8)/255,(o&255)/255));this.colorPoints.push(a)}}}this.colorChromeSeparation=this.colorPoints.length;for(e=0;e<this.firefoxBitmapData.width;e++){for(t=0;t<this.firefoxBitmapData.height;t++){a=new s(i.PARTICLE_SIZE*(e-this.firefoxBitmapData.width/2+100),i.PARTICLE_SIZE*(-t+this.firefoxBitmapData.height/2));o=this.firefoxBitmapData.getPixel32(e,t);if((o>>24&255)>176){this.colorValues.push(new s(((o&16711680)>>16)/255,((o&65280)>>8)/255,(o&255)/255));this.colorPoints.push(a)}}}this.colorFirefoxSeparation=this.colorPoints.length;for(e=0;e<this.safariBitmapData.width;e++){for(t=0;t<this.safariBitmapData.height;t++){a=new s(i.PARTICLE_SIZE*(e-this.safariBitmapData.width/2),i.PARTICLE_SIZE*(-t+this.safariBitmapData.height/2),-i.PARTICLE_SIZE*100);o=this.safariBitmapData.getPixel32(e,t);if((o>>24&255)>176){this.colorValues.push(new s(((o&16711680)>>16)/255,((o&65280)>>8)/255,(o&255)/255));this.colorPoints.push(a)}}}this.colorSafariSeparation=this.colorPoints.length;for(e=0;e<this.ieBitmapData.width;e++){for(t=0;t<this.ieBitmapData.height;t++){a=new s(i.PARTICLE_SIZE*(e-this.ieBitmapData.width/2),i.PARTICLE_SIZE*(-t+this.ieBitmapData.height/2),i.PARTICLE_SIZE*100);o=this.ieBitmapData.getPixel32(e,t);if((o>>24&255)>176){this.colorValues.push(new s(((o&16711680)>>16)/255,((o&65280)>>8)/255,(o&255)/255));this.colorPoints.push(a)}}}var l=this.colorPoints.length;var h=new w(i.PARTICLE_SIZE,i.PARTICLE_SIZE,1,1,false);var c=new Array;for(e=0;e<l;e++)c.push(h.geometry);this.colorGeometry=M.generateGeometry(c);this.colorAnimationSet=new y;this.colorAnimationSet.addAnimation(new v);this.colorAnimationSet.addAnimation(new A(b.LOCAL_STATIC));this.colorAnimationSet.addAnimation(new C(b.LOCAL_STATIC));this.colorAnimationSet.addAnimation(new E(b.LOCAL_STATIC,true,false,new r(0,1,0,1)));this.colorAnimationSet.initParticleFunc=this.iniColorParticleFunc;this.colorAnimationSet.initParticleScope=this};i.prototype.initObjects=function(){this.colorAnimators=new Array(i.NUM_ANIMATORS);this.colorParticleMesh=new u(this.colorGeometry,this.colorMaterial);var e=0;for(e=0;e<i.NUM_ANIMATORS;e++){this.colorParticleMesh=this.colorParticleMesh.clone();this.colorParticleMesh.rotationY=45*(e-1);this.scene.addChild(this.colorParticleMesh);this.colorAnimators[e]=new P(this.colorAnimationSet);this.colorParticleMesh.animator=this.colorAnimators[e];this.scene.addChild(this.colorParticleMesh)}};i.prototype.initListeners=function(){var i=this;window.onresize=function(e){return i.onResize(e)};document.onmousedown=function(e){return i.onMouseDown(e)};document.onmouseup=function(e){return i.onMouseUp(e)};document.onmousemove=function(e){return i.onMouseMove(e)};this.onResize();this.timer=new l(this.onEnterFrame,this);this.timer.start();n.addEventListener(a.RESOURCE_COMPLETE,function(e){return i.onResourceComplete(e)});n.load(new o("assets/firefox.png"));n.load(new o("assets/chrome.png"));n.load(new o("assets/safari.png"));n.load(new o("assets/ie.png"))};i.prototype.iniColorParticleFunc=function(e){e.startTime=0;e.duration=1;var t=Math.random()*Math.PI*2;var a=Math.random()*Math.PI*2;var n=500;if(e.index<this.colorChromeSeparation)e[A.BEZIER_END_VECTOR3D]=new s(300*i.PARTICLE_SIZE,0,0);else if(e.index<this.colorFirefoxSeparation)e[A.BEZIER_END_VECTOR3D]=new s(-300*i.PARTICLE_SIZE,0,0);else if(e.index<this.colorSafariSeparation)e[A.BEZIER_END_VECTOR3D]=new s(0,0,300*i.PARTICLE_SIZE);else e[A.BEZIER_END_VECTOR3D]=new s(0,0,-300*i.PARTICLE_SIZE);var o=this.colorValues[e.index];e[E.COLOR_INITIAL_COLORTRANSFORM]=new r(o.x,o.y,o.z,1);e[A.BEZIER_CONTROL_VECTOR3D]=new s(n*Math.sin(t)*Math.cos(a),n*Math.cos(t)*Math.cos(a),n*Math.sin(a));e[C.POSITION_VECTOR3D]=this.colorPoints[e.index]};i.prototype.onEnterFrame=function(i){this.time+=i;this.cameraController.panAngle+=.2;var e;var t;if(this.colorAnimators){for(e=0;e<this.colorAnimators.length;e++){t=1e3*(Math.sin(this.time/5e3+Math.PI*e/4)+1);this.colorAnimators[e].update(t)}}this.angle+=Math.PI/180;this.greenLight.x=Math.sin(this.angle)*600;this.greenLight.z=Math.cos(this.angle)*600;this.blueLight.x=Math.sin(this.angle+Math.PI)*600;this.blueLight.z=Math.cos(this.angle+Math.PI)*600;this.view.render()};i.prototype.onResourceComplete=function(i){switch(i.url){case"assets/firefox.png":this.firefoxBitmapData=g.bitmapData(i.assets[0]);break;case"assets/chrome.png":this.chromeBitmapData=g.bitmapData(i.assets[0]);break;case"assets/ie.png":this.ieBitmapData=g.bitmapData(i.assets[0]);break;case"assets/safari.png":this.safariBitmapData=g.bitmapData(i.assets[0]);break}if(this.firefoxBitmapData!=null&&this.chromeBitmapData!=null&&this.safariBitmapData!=null&&this.ieBitmapData!=null){this.initParticles();this.initObjects()}};i.prototype.onMouseDown=function(i){this.lastPanAngle=this.cameraController.panAngle;this.lastTiltAngle=this.cameraController.tiltAngle;this.lastMouseX=i.clientX;this.lastMouseY=i.clientY;this.move=true};i.prototype.onMouseUp=function(i){this.move=false};i.prototype.onMouseMove=function(i){if(this.move){this.cameraController.panAngle=.3*(i.clientX-this.lastMouseX)+this.lastPanAngle;this.cameraController.tiltAngle=.3*(i.clientY-this.lastMouseY)+this.lastTiltAngle}};i.prototype.onResize=function(i){if(i===void 0){i=null}this.view.y=0;this.view.x=0;this.view.width=window.innerWidth;this.view.height=window.innerHeight};i.PARTICLE_SIZE=2;i.NUM_ANIMATORS=4;return i}();window.onload=function(){new R}},{"awayjs-core/lib/events/LoaderEvent":undefined,"awayjs-core/lib/geom/ColorTransform":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-core/lib/library/AssetLibrary":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/utils/RequestAnimationFrame":undefined,"awayjs-display/lib/containers/Scene":undefined,"awayjs-display/lib/containers/View":undefined,"awayjs-display/lib/controllers/HoverController":undefined,"awayjs-display/lib/entities/Camera":undefined,"awayjs-display/lib/entities/Mesh":undefined,"awayjs-display/lib/entities/PointLight":undefined,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":undefined,"awayjs-display/lib/prefabs/PrimitivePlanePrefab":undefined,"awayjs-display/lib/utils/Cast":undefined,"awayjs-methodmaterials/lib/MethodMaterial":undefined,"awayjs-methodmaterials/lib/pool/MethodRendererPool":undefined,"awayjs-renderergl/lib/DefaultRenderer":undefined,"awayjs-renderergl/lib/animators/ParticleAnimationSet":undefined,"awayjs-renderergl/lib/animators/ParticleAnimator":undefined,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":undefined,"awayjs-renderergl/lib/animators/nodes/ParticleBezierCurveNode":undefined,"awayjs-renderergl/lib/animators/nodes/ParticleBillboardNode":undefined,"awayjs-renderergl/lib/animators/nodes/ParticleInitialColorNode":undefined,"awayjs-renderergl/lib/animators/nodes/ParticlePositionNode":undefined,"awayjs-renderergl/lib/utils/ParticleGeometryHelper":undefined}]},{},["./src/Intermediate_ParticleExplosions.ts"]);

//# sourceMappingURL=Intermediate_ParticleExplosions.js.map