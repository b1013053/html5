(function e(i,t,r){function a(s,o){if(!t[s]){if(!i[s]){var l=typeof require=="function"&&require;if(!o&&l)return l(s,!0);if(n)return n(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=t[s]={exports:{}};i[s][0].call(u.exports,function(e){var t=i[s][1][e];return a(t?t:e)},u,u.exports,e,i,t,r)}return t[s].exports}var n=typeof require=="function"&&require;for(var s=0;s<r.length;s++)a(r[s]);return a})({"./src/TorusPrimitive.ts":[function(e,i,t){var r=e("awayjs-core/lib/events/Event");var a=e("awayjs-core/lib/net/URLLoader");var n=e("awayjs-core/lib/net/URLLoaderDataFormat");var s=e("awayjs-core/lib/net/URLRequest");var o=e("awayjs-core/lib/parsers/ParserUtils");var l=e("awayjs-core/lib/textures/ImageTexture");var d=e("awayjs-core/lib/utils/RequestAnimationFrame");var u=e("awayjs-display/lib/containers/View");var h=e("awayjs-display/lib/entities/DirectionalLight");var w=e("awayjs-display/lib/prefabs/PrimitiveTorusPrefab");var c=e("awayjs-display/lib/materials/lightpickers/StaticLightPicker");var f=e("awayjs-renderergl/lib/DefaultRenderer");var y=e("awayjs-methodmaterials/lib/MethodMaterial");var p=e("awayjs-methodmaterials/lib/pool/MethodRendererPool");var v=function(){function e(){var e=this;this.initView();this._raf=new d(this.render,this);this._raf.start();this.loadResources();window.onresize=function(i){return e.onResize(i)};this.onResize()}e.prototype.initView=function(){this._view=new u(new f(p));this._view.backgroundColor=0};e.prototype.loadResources=function(){var e=this;var i=new a;i.dataFormat=n.BLOB;i.addEventListener(r.COMPLETE,function(i){return e.urlCompleteHandler(i)});i.load(new s("assets/dots.png"))};e.prototype.urlCompleteHandler=function(e){var i=this;this._image=o.blobToImage(e.target.data);this._image.onload=function(e){return i.imageCompleteHandler(e)}};e.prototype.initLights=function(){this._light=new h;this._light.diffuse=.7;this._light.specular=1;this._view.scene.addChild(this._light);this._lightPicker=new c([this._light])};e.prototype.initMaterial=function(e){this._texture=new l(e);this._material=new y(this._texture,true,true,false);this._material.lightPicker=this._lightPicker};e.prototype.initTorus=function(){this._torus=new w(220,80,32,16,false);this._mesh=this._torus.getNewObject();this._mesh.material=this._material;this._view.scene.addChild(this._mesh)};e.prototype.imageCompleteHandler=function(e){this.initLights();this.initMaterial(e.target);this.initTorus()};e.prototype.render=function(e){if(e===void 0){e=null}if(this._mesh)this._mesh.rotationY+=1;this._view.render()};e.prototype.onResize=function(e){if(e===void 0){e=null}this._view.y=0;this._view.x=0;this._view.width=window.innerWidth;this._view.height=window.innerHeight};return e}();window.onload=function(){new v}},{"awayjs-core/lib/events/Event":undefined,"awayjs-core/lib/net/URLLoader":undefined,"awayjs-core/lib/net/URLLoaderDataFormat":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/parsers/ParserUtils":undefined,"awayjs-core/lib/textures/ImageTexture":undefined,"awayjs-core/lib/utils/RequestAnimationFrame":undefined,"awayjs-display/lib/containers/View":undefined,"awayjs-display/lib/entities/DirectionalLight":undefined,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":undefined,"awayjs-display/lib/prefabs/PrimitiveTorusPrefab":undefined,"awayjs-methodmaterials/lib/MethodMaterial":undefined,"awayjs-methodmaterials/lib/pool/MethodRendererPool":undefined,"awayjs-renderergl/lib/DefaultRenderer":undefined}]},{},["./src/TorusPrimitive.ts"]);

//# sourceMappingURL=TorusPrimitive.js.map