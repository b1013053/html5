(function e(t,i,o){function s(n,a){if(!i[n]){if(!t[n]){var h=typeof require=="function"&&require;if(!a&&h)return h(n,!0);if(r)return r(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[n]={exports:{}};t[n][0].call(c.exports,function(e){var i=t[n][1][e];return s(i?i:e)},c,c.exports,e,t,i,o)}return i[n].exports}var r=typeof require=="function"&&require;for(var n=0;n<o.length;n++)s(o[n]);return s})({"./src/AWD3FontViewer.ts":[function(e,t,i){var o=e("awayjs-core/lib/data/Geometry");var s=e("awayjs-core/lib/events/AssetEvent");var r=e("awayjs-core/lib/events/LoaderEvent");var n=e("awayjs-core/lib/library/AssetLibrary");var a=e("awayjs-core/lib/net/URLRequest");var h=e("awayjs-core/lib/projections/OrthographicProjection");var l=e("awayjs-core/lib/utils/RequestAnimationFrame");var c=e("awayjs-display/lib/containers/View");var _=e("awayjs-display/lib/entities/Mesh");var p=e("awayjs-display/lib/controllers/HoverController");var u=e("awayjs-display/lib/containers/Loader");var d=e("awayjs-renderergl/lib/DefaultRenderer");var v=e("awayjs-parsers/lib/AWDParser");var f=e("awayjs-player/lib/display/MovieClip");var y=e("awayjs-core/lib/projections/CoordinateSystem");var w=e("awayjs-core/lib/projections/PerspectiveProjection");var j=e("awayjs-display/lib/entities/Camera");var m=e("awayjs-display/lib/text/Font");var b=function(){function e(){this._time=0;this.init()}e.prototype.init=function(){this.initEngine();this.initObjects();this.initListeners()};e.prototype.initEngine=function(){this._view=new c(new d);this._view.backgroundColor=16777215;this._stage_width=550;this._stage_height=400;this._isperspective=true;this._projection=new w;this._projection.coordinateSystem=y.RIGHT_HANDED;this._projection.focalLength=1e3;this._projection.preserveFocalLength=true;this._projection.originX=.5;this._projection.originY=.5;this._camera_perspective=new j;this._camera_perspective.projection=this._projection;this._hoverControl=new p(this._camera_perspective,null,180,0,1e3);this._ortho_projection=new h(500);this._ortho_projection.coordinateSystem=y.RIGHT_HANDED;this._ortho_projection.far=5e5;this._ortho_projection.near=.1;this._ortho_projection.originX=.5;this._ortho_projection.originY=.5;this._camera_ortho=new j;this._camera_ortho.projection=this._ortho_projection;this._view.camera=this._camera_perspective;this._camera_ortho.x=0;this._camera_ortho.y=0;this._camera_ortho.scaleY=-1;this._camera_ortho.z=0};e.prototype.initObjects=function(){var e=this;n.enableParser(v);var t=new u;t.addEventListener(s.ASSET_COMPLETE,function(t){return e.onAssetComplete(t)});t.addEventListener(r.RESOURCE_COMPLETE,function(t){return e.onRessourceComplete(t)});t.load(new a("assets/AWD3/Fonttable_test.awd"))};e.prototype.initListeners=function(){var e=this;window.onresize=function(t){return e.onResize(t)};document.onkeydown=function(t){return e.onKeyDown(t)};document.onmousedown=function(t){return e.onMouseDown(t)};document.onmouseup=function(t){return e.onMouseUp(t)};document.onmousemove=function(t){return e.onMouseMove(t)};document.onmousewheel=function(t){return e.onMouseWheel(t)};this.onResize();this._timer=new l(this.onEnterFrame,this);this._timer.start()};e.prototype.onAssetComplete=function(e){if(e.asset.isAsset(m)){console.log("Font finished!!! ");var t=e.asset;var i=t.get_font_table("RegularStyle");var s=i.get_font_chars();var r=Math.sqrt(s.length);var n=i.get_font_em_size()/100;var a=-(r/2)*n;var h=-(r/2)*n;var l=0;var c=a;var p=h;for(var u=0;u<s.length;u++){var d=new _(new o);if(l>=r){l=0;c=a;p+=n}l++;var v=s[u];if(v!=null){var y=v.subgeom;if(y!=null){d.geometry.addSubGeometry(y)}}c+=n;d.x=c;d.y=p;d.scaleX=d.scaleY=d.scaleZ=.01;this._view.scene.addChild(d)}}if(e.asset.isAsset(f)){}};e.prototype.onRessourceComplete=function(e){if(this._rootTimeLine){}};e.prototype.onEnterFrame=function(e){this._time+=e;if(this._rootTimeLine!=undefined){this._rootTimeLine.update(e)}this._view.render()};e.prototype.onKeyDown=function(e){console.log("keycode = "+e.keyCode);if(e.keyCode==80){this._isperspective=true;this._view.camera=this._camera_perspective}if(e.keyCode==79){this._isperspective=false;this._view.camera=this._camera_ortho}if(e.keyCode==81){if(this._isperspective){this._hoverControl.distance+=5}else{this._ortho_projection.projectionHeight+=5}}else if(e.keyCode==87){if(this._isperspective){this._hoverControl.distance-=5}else{this._ortho_projection.projectionHeight-=5}}if(e.keyCode==65){if(this._isperspective){this._hoverControl.distance+=50}else{this._ortho_projection.projectionHeight+=50}}else if(e.keyCode==83){if(this._isperspective){this._hoverControl.distance-=50}else{this._ortho_projection.projectionHeight-=50}}};e.prototype.onMouseDown=function(e){this._lastPanAngle=this._hoverControl.panAngle;this._lastTiltAngle=this._hoverControl.tiltAngle;this._lastMouseX=e.clientX;this._lastMouseY=e.clientY;this._move=true};e.prototype.onMouseUp=function(e){this._move=false};e.prototype.onMouseMove=function(e){if(this._move){if(this._isperspective){this._hoverControl.panAngle=.3*(e.clientX-this._lastMouseX)+this._lastPanAngle;this._hoverControl.tiltAngle=-.3*(e.clientY-this._lastMouseY)+this._lastTiltAngle}else{if(e.clientX>this._lastMouseX+10)this._camera_ortho.x-=10;else if(e.clientX>this._lastMouseX)this._camera_ortho.x--;else if(e.clientX<this._lastMouseX-10)this._camera_ortho.x+=10;else if(e.clientX<this._lastMouseX)this._camera_ortho.x++;if(e.clientY>this._lastMouseY+10)this._camera_ortho.y-=10;else if(e.clientY>this._lastMouseY)this._camera_ortho.y--;else if(e.clientY<this._lastMouseY-10)this._camera_ortho.y+=10;else if(e.clientY<this._lastMouseY)this._camera_ortho.y++;this._lastMouseX=e.clientX;this._lastMouseY=e.clientY}}};e.prototype.onMouseWheel=function(e){if(this._isperspective){this._hoverControl.distance-=e.wheelDelta*5;if(this._hoverControl.distance<100){this._hoverControl.distance=100}}else{this._ortho_projection.projectionHeight-=e.wheelDelta*5;if(this._ortho_projection.projectionHeight<5){this._ortho_projection.projectionHeight=5}}};e.prototype.onResize=function(e){if(e===void 0){e=null}this._view.y=0;this._view.x=0;this._view.width=window.innerWidth;this._view.height=window.innerHeight};return e}();window.onload=function(){new b}},{"awayjs-core/lib/data/Geometry":undefined,"awayjs-core/lib/events/AssetEvent":undefined,"awayjs-core/lib/events/LoaderEvent":undefined,"awayjs-core/lib/library/AssetLibrary":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/projections/CoordinateSystem":undefined,"awayjs-core/lib/projections/OrthographicProjection":undefined,"awayjs-core/lib/projections/PerspectiveProjection":undefined,"awayjs-core/lib/utils/RequestAnimationFrame":undefined,"awayjs-display/lib/containers/Loader":undefined,"awayjs-display/lib/containers/View":undefined,"awayjs-display/lib/controllers/HoverController":undefined,"awayjs-display/lib/entities/Camera":undefined,"awayjs-display/lib/entities/Mesh":undefined,"awayjs-display/lib/text/Font":undefined,"awayjs-parsers/lib/AWDParser":undefined,"awayjs-player/lib/display/MovieClip":undefined,"awayjs-renderergl/lib/DefaultRenderer":undefined}]},{},["./src/AWD3FontViewer.ts"]);

//# sourceMappingURL=AWD3FontViewer.js.map