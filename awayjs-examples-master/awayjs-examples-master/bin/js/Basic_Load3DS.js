(function e(i,t,a){function s(r,o){if(!t[r]){if(!i[r]){var l=typeof require=="function"&&require;if(!o&&l)return l(r,!0);if(n)return n(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var h=t[r]={exports:{}};i[r][0].call(h.exports,function(e){var t=i[r][1][e];return s(t?t:e)},h,h.exports,e,i,t,a)}return t[r].exports}var n=typeof require=="function"&&require;for(var r=0;r<a.length;r++)s(a[r]);return s})({"./src/Basic_Load3DS.ts":[function(e,i,t){var a=e("awayjs-core/lib/events/AssetEvent");var s=e("awayjs-core/lib/events/LoaderEvent");var n=e("awayjs-core/lib/geom/Vector3D");var r=e("awayjs-core/lib/library/AssetLibrary");var o=e("awayjs-core/lib/library/AssetLoaderContext");var l=e("awayjs-core/lib/net/URLRequest");var d=e("awayjs-core/lib/utils/RequestAnimationFrame");var h=e("awayjs-display/lib/containers/Loader");var u=e("awayjs-display/lib/containers/View");var c=e("awayjs-display/lib/controllers/HoverController");var w=e("awayjs-display/lib/entities/DirectionalLight");var y=e("awayjs-display/lib/entities/Mesh");var p=e("awayjs-display/lib/materials/MaterialBase");var _=e("awayjs-display/lib/materials/lightpickers/StaticLightPicker");var f=e("awayjs-display/lib/prefabs/PrimitivePlanePrefab");var v=e("awayjs-renderergl/lib/DefaultRenderer");var m=e("awayjs-methodmaterials/lib/MethodMaterial");var b=e("awayjs-methodmaterials/lib/pool/MethodRendererPool");var g=e("awayjs-methodmaterials/lib/methods/ShadowSoftMethod");var j=e("awayjs-parsers/lib/Max3DSParser");var M=function(){function e(){this._time=0;this._move=false;this.init()}e.prototype.init=function(){this.initEngine();this.initLights();this.initMaterials();this.initObjects();this.initListeners()};e.prototype.initEngine=function(){this._view=new u(new v(b));this._view.camera.projection.far=2100;this._cameraController=new c(this._view.camera,null,45,20,1e3,10)};e.prototype.initLights=function(){this._light=new w(-1,-1,1);this._direction=new n(-1,-1,1);this._lightPicker=new _([this._light]);this._view.scene.addChild(this._light)};e.prototype.initMaterials=function(){this._groundMaterial=new m;this._groundMaterial.shadowMethod=new g(this._light,10,5);this._groundMaterial.shadowMethod.epsilon=.2;this._groundMaterial.lightPicker=this._lightPicker;this._groundMaterial.specular=0};e.prototype.initObjects=function(){this._loader=new h;this._loader.transform.scale=new n(300,300,300);this._loader.z=-200;this._view.scene.addChild(this._loader);this._plane=new f(1e3,1e3);this._ground=this._plane.getNewObject();this._ground.material=this._groundMaterial;this._ground.castsShadows=false;this._view.scene.addChild(this._ground)};e.prototype.initListeners=function(){var e=this;window.onresize=function(i){return e.onResize(i)};document.onmousedown=function(i){return e.onMouseDown(i)};document.onmouseup=function(i){return e.onMouseUp(i)};document.onmousemove=function(i){return e.onMouseMove(i)};this.onResize();this._timer=new d(this.onEnterFrame,this);this._timer.start();var i=new o;i.mapUrl("texture.jpg","assets/soldier_ant.jpg");this._loader.addEventListener(a.ASSET_COMPLETE,function(i){return e.onAssetComplete(i)});this._loader.load(new l("assets/soldier_ant.3ds"),i,null,new j(false));r.addEventListener(s.RESOURCE_COMPLETE,function(i){return e.onResourceComplete(i)});r.load(new l("assets/CoarseRedSand.jpg"))};e.prototype.onEnterFrame=function(e){this._time+=e;this._direction.x=-Math.sin(this._time/4e3);this._direction.z=-Math.cos(this._time/4e3);this._light.direction=this._direction;this._view.render()};e.prototype.onAssetComplete=function(e){var i=e.asset;switch(i.assetType){case y.assetType:var t=e.asset;t.castsShadows=true;break;case p.assetType:var a=e.asset;a.shadowMethod=new g(this._light,10,5);a.shadowMethod.epsilon=.2;a.lightPicker=this._lightPicker;a.gloss=30;a.specular=1;a.color=3158080;a.ambient=1;break}};e.prototype.onResourceComplete=function(e){var i=e.assets;var t=i.length;for(var a=0;a<t;a++){var s=i[a];console.log(s.name,e.url);switch(e.url){case"assets/CoarseRedSand.jpg":this._groundMaterial.texture=s;break}}};e.prototype.onMouseDown=function(e){this._lastPanAngle=this._cameraController.panAngle;this._lastTiltAngle=this._cameraController.tiltAngle;this._lastMouseX=e.clientX;this._lastMouseY=e.clientY;this._move=true};e.prototype.onMouseUp=function(e){this._move=false};e.prototype.onMouseMove=function(e){if(this._move){this._cameraController.panAngle=.3*(e.clientX-this._lastMouseX)+this._lastPanAngle;this._cameraController.tiltAngle=.3*(e.clientY-this._lastMouseY)+this._lastTiltAngle}};e.prototype.onResize=function(e){if(e===void 0){e=null}this._view.y=0;this._view.x=0;this._view.width=window.innerWidth;this._view.height=window.innerHeight};return e}();window.onload=function(){new M}},{"awayjs-core/lib/events/AssetEvent":undefined,"awayjs-core/lib/events/LoaderEvent":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-core/lib/library/AssetLibrary":undefined,"awayjs-core/lib/library/AssetLoaderContext":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/utils/RequestAnimationFrame":undefined,"awayjs-display/lib/containers/Loader":undefined,"awayjs-display/lib/containers/View":undefined,"awayjs-display/lib/controllers/HoverController":undefined,"awayjs-display/lib/entities/DirectionalLight":undefined,"awayjs-display/lib/entities/Mesh":undefined,"awayjs-display/lib/materials/MaterialBase":undefined,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":undefined,"awayjs-display/lib/prefabs/PrimitivePlanePrefab":undefined,"awayjs-methodmaterials/lib/MethodMaterial":undefined,"awayjs-methodmaterials/lib/methods/ShadowSoftMethod":undefined,"awayjs-methodmaterials/lib/pool/MethodRendererPool":undefined,"awayjs-parsers/lib/Max3DSParser":undefined,"awayjs-renderergl/lib/DefaultRenderer":undefined}]},{},["./src/Basic_Load3DS.ts"]);

//# sourceMappingURL=Basic_Load3DS.js.map