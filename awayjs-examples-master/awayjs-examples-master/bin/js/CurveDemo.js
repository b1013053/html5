(function e(s,t,r){function i(n,u){if(!t[n]){if(!s[n]){var o=typeof require=="function"&&require;if(!u&&o)return o(n,!0);if(a)return a(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var p=t[n]={exports:{}};s[n][0].call(p.exports,function(e){var t=s[n][1][e];return i(t?t:e)},p,p.exports,e,s,t,r)}return t[n].exports}var a=typeof require=="function"&&require;for(var n=0;n<r.length;n++)i(r[n]);return i})({"./src/CurveDemo.ts":[function(e,s,t){var r=e("awayjs-core/lib/data/CurveSubGeometry");var i=e("awayjs-core/lib/data/Geometry");var a=e("awayjs-core/lib/events/Event");var n=e("awayjs-core/lib/geom/Vector3D");var u=e("awayjs-core/lib/net/URLLoader");var o=e("awayjs-core/lib/net/URLLoaderDataFormat");var h=e("awayjs-core/lib/net/URLRequest");var p=e("awayjs-core/lib/parsers/ParserUtils");var l=e("awayjs-core/lib/textures/ImageTexture");var d=e("awayjs-core/lib/utils/RequestAnimationFrame");var c=e("awayjs-display/lib/containers/View");var w=e("awayjs-display/lib/controllers/HoverController");var v=e("awayjs-display/lib/entities/DirectionalLight");var y=e("awayjs-display/lib/entities/Mesh");var f=e("awayjs-display/lib/materials/BasicMaterial");var m=e("awayjs-renderergl/lib/DefaultRenderer");var _=e("awayjs-methodmaterials/lib/MethodMaterial");var b=function(){function e(){var e=this;this.initView();this._raf=new d(this.render,this);this._raf.start();this.loadResources();window.onresize=function(s){return e.onResize(s)};this.onResize()}e.prototype.initView=function(){var e=this;this._view=new c(new m);this._view.backgroundColor=2245734;this._cameraController=new w(this._view.camera,null,0,0,-150,10,90);this._cameraController.lookAtPosition=new n(0,0,0);this._cameraController.tiltAngle=0;this._cameraController.panAngle=0;this._cameraController.minTiltAngle=-60;this._cameraController.maxTiltAngle=60;this._cameraController.autoUpdate=false;document.onmousedown=function(s){return e.onMouseDown(s)};document.onmouseup=function(s){return e.onMouseUp(s)};document.onmousemove=function(s){return e.onMouseMove(s)};document.onmousewheel=function(s){return e.onMouseWheel(s)}};e.prototype.onMouseDown=function(e){this._lastPanAngle=this._cameraController.panAngle;this._lastTiltAngle=this._cameraController.tiltAngle;this._lastMouseX=e.clientX;this._lastMouseY=e.clientY;this._move=true};e.prototype.onMouseUp=function(e){this._move=false};e.prototype.onMouseMove=function(e){if(this._move){this._cameraController.panAngle=.3*(e.clientX-this._lastMouseX)+this._lastPanAngle;this._cameraController.tiltAngle=.3*(e.clientY-this._lastMouseY)+this._lastTiltAngle}};e.prototype.onMouseWheel=function(e){this._cameraController.distance-=e.wheelDelta*2;if(this._cameraController.distance<100)this._cameraController.distance=100;else if(this._cameraController.distance>2e3)this._cameraController.distance=2e3};e.prototype.loadResources=function(){var e=this;var s=new u;s.dataFormat=o.BLOB;s.addEventListener(a.COMPLETE,function(s){return e.urlCompleteHandler(s)});s.load(new h("assets/alpha.png"))};e.prototype.urlCompleteHandler=function(e){var s=this;this._image=p.blobToImage(e.target.data);this._image.onload=function(e){return s.imageCompleteHandler(e)}};e.prototype.initLights=function(){this._light=new v;this._light.diffuse=.7;this._light.specular=1};e.prototype.initMaterial=function(e){this._texture=new l(e);this._material=new _(this._texture,true,true,false);this._material.lightPicker=this._lightPicker};e.prototype.initTorus=function(){this.addSolidTris();this.addTexturedTris();this._view.camera.z+=750};e.prototype.addSolidTris=function(){var e=new Array;e.push(-300,-50,1);e.push(-200,50,1);e.push(-100,-50,1);e.push(-100,-50,-1);e.push(0,50,-1);e.push(100,-50,-1);e.push(100,-50,1);e.push(200,50,1);e.push(300,-50,1);e.push(-100,20,-1);e.push(-150,40,-1);e.push(-100,60,-1);e.push(100,20,1);e.push(50,40,1);e.push(100,60,1);e.push(0,0+50,1);e.push(50,0+50,1);e.push(0,-50+50,1);e.push(0,0+50,1);e.push(0,-50+50,1);e.push(-50,0+50,1);e.push(0,0+50,1);e.push(-50,0+50,1);e.push(0,50+50,1);e.push(0,0+50,1);e.push(0,50+50,1);e.push(50,0+50,1);e.push(0,0+150,1);e.push(50,0+150,1);e.push(0,-50+150,1);e.push(0,0+150,1);e.push(0,-50+150,1);e.push(-50,0+150,1);e.push(0,0+150,1);e.push(-50,0+150,1);e.push(0,50+150,1);e.push(0,0+150,1);e.push(0,50+150,1);e.push(50,0+150,1);var s=new Array;s.push(0,1,2);s.push(3,4,5);s.push(6,7,8);s.push(9,10,11);s.push(12,13,14);s.push(15,16,17);s.push(18,19,20);s.push(21,22,23);s.push(24,25,26);s.push(27,28,29);s.push(30,31,32);s.push(33,34,35);s.push(36,37,38);var t=new Array;t.push(2,1);t.push(2,0);t.push(2,0);t.push(0,0);t.push(.5,0);t.push(1,1);t.push(0,0);t.push(.5,0);t.push(1,1);t.push(0,0);t.push(.5,0);t.push(1,1);t.push(0,0);t.push(.5,0);t.push(1,1);t.push(2,1);t.push(2,0);t.push(2,0);t.push(2,1);t.push(2,0);t.push(2,0);t.push(2,1);t.push(2,0);t.push(2,0);t.push(2,1);t.push(2,0);t.push(2,0);t.push(2,1);t.push(3,1);t.push(4,1);t.push(2,1);t.push(3,1);t.push(4,1);t.push(2,1);t.push(3,1);t.push(4,1);t.push(2,1);t.push(3,1);t.push(4,1);var a=new r(true);a.autoDeriveUVs=false;a.updatePositions(e);a.updateIndices(s);a.updateCurves(t);var n=new i;n.addSubGeometry(a);var u=new y(n);var o=new f(16777215);o.preserveAlpha=true;o.alphaBlending=true;u.material=o;this._view.scene.addChild(u)};e.prototype.addTexturedTris=function(){var e=new Array;e.push(-300,-50-100,1);e.push(-200,50-100,1);e.push(-100,-50-100,1);e.push(-100,-50-100,-1);e.push(0,50-100,-1);e.push(100,-50-100,-1);e.push(100,-50-100,1);e.push(200,50-100,1);e.push(300,-50-100,1);var s=new Array;s.push(0,1,2);s.push(3,4,5);s.push(6,7,8);var t=new Array;t.push(2,1);t.push(3,1);t.push(4,1);t.push(0,0);t.push(.5,0);t.push(1,1);t.push(0,0);t.push(.5,0);t.push(1,1);var a=new Array;a.push(0,0);a.push(.5,1);a.push(1,0);a.push(0,0);a.push(.5,1);a.push(1,0);a.push(0,0);a.push(.5,1);a.push(1,0);var n=new r(true);n.autoDeriveUVs=false;n.updatePositions(e);n.updateIndices(s);n.updateCurves(t);n.updateUVs(a);var u=new i;u.addSubGeometry(n);var o=new y(u);var h=new f(this._texture);h.preserveAlpha=true;h.alphaBlending=true;o.material=h;this._view.scene.addChild(o)};e.prototype.imageCompleteHandler=function(e){this.initLights();this.initMaterial(e.target);this.initTorus()};e.prototype.render=function(e){if(e===void 0){e=null}if(this._mesh)this._mesh.rotationY+=1;this._view.render()};e.prototype.onResize=function(e){if(e===void 0){e=null}this._view.y=0;this._view.x=0;this._view.width=window.innerWidth;this._view.height=window.innerHeight};return e}();window.onload=function(){new b}},{"awayjs-core/lib/data/CurveSubGeometry":undefined,"awayjs-core/lib/data/Geometry":undefined,"awayjs-core/lib/events/Event":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-core/lib/net/URLLoader":undefined,"awayjs-core/lib/net/URLLoaderDataFormat":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/parsers/ParserUtils":undefined,"awayjs-core/lib/textures/ImageTexture":undefined,"awayjs-core/lib/utils/RequestAnimationFrame":undefined,"awayjs-display/lib/containers/View":undefined,"awayjs-display/lib/controllers/HoverController":undefined,"awayjs-display/lib/entities/DirectionalLight":undefined,"awayjs-display/lib/entities/Mesh":undefined,"awayjs-display/lib/materials/BasicMaterial":undefined,"awayjs-methodmaterials/lib/MethodMaterial":undefined,"awayjs-renderergl/lib/DefaultRenderer":undefined}]},{},["./src/CurveDemo.ts"]);

//# sourceMappingURL=CurveDemo.js.map